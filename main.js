(()=>{"use strict";function e(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.onLikeClick,o=r.onRemoveClick,c=r.onImageClick,i=e.querySelector(".card").cloneNode(!0),u=i.querySelector(".card__delete-button"),a=i.querySelector(".card__like-button"),p=i.querySelector(".card__image"),l=t.link,d=t.name;return i.querySelector(".card__image").src=l,i.querySelector(".card__image").alt=d,i.querySelector(".card__title").textContent=d,a&&n&&a.addEventListener("click",(function(e){return n(e,{cardElement:i,data:t})})),u&&o&&u.addEventListener("click",(function(e){return o(e,{cardElement:i,data:t})})),p&&c&&p.addEventListener("click",(function(e){return c(e,{cardElement:i,data:t})})),i}function t(e,t){t.cardElement.remove()}function r(e){e.currentTarget.classList.toggle("card__like-button_is-active")}var n=document.querySelector(".popup__form"),o=function(e,t){c(e)?t.disabled=!0:t.disabled=!1},c=function(e){return e.some((function(e){return!e.validity.valid}))};function i(e){e.target===e.currentTarget&&p(e.currentTarget)}function u(e){if("Escape"===e.key){var t=document.querySelector(".popup_is-opened");t&&p(t)}}function a(e){var t,r=Array.from(e.querySelectorAll(".popup__input")),n=e.querySelector(".popup__button");o(r,n),e.classList.add("popup_is-opened"),e.addEventListener("click",i),document.addEventListener("keydown",u),(t=document.querySelector('.popup__form[name="edit-profile"]')).querySelectorAll(".form__input-error_active").forEach((function(e){e.textContent="",e.classList.remove("form__input-error_active")})),t.querySelectorAll(".form__input_type_error").forEach((function(e){e.classList.remove("form__input_type_error")}))}function p(e){e.classList.remove("popup_is-opened"),e.removeEventListener("click",i),document.removeEventListener("keydown",u)}Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var t=Array.from(e.querySelectorAll(".popup__input")),r=e.querySelector(".popup__button");o(t,r),t.forEach((function(n){n.addEventListener("input",(function(){!function(e,t){t.validity.valid?function(e,t){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("form__input_type_error"),r.classList.remove("form__input-error_active"),r.textContent=""}(e,t):function(e,t,r){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.add("form__input_type_error"),n.textContent=r,n.classList.add("form__input-error_active")}(e,t,t.validationMessage)}(e,n),o(t,r)}))}))}(e)})),n.querySelector(".popup__input").addEventListener("input",(function(e){console.log(e.target.validity.valid)}));var l=document.querySelector("#card-template").content,d=document.querySelector(".places__list");[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}].forEach((function(n){var o=e(l,n,{onLikeClick:r,onRemoveClick:t,onImageClick:A});d.append(o)}));var s=document.querySelector(".profile__edit-button"),_=document.querySelector(".popup_type_edit"),m=document.querySelector(".profile__add-button"),v=document.querySelector(".popup_type_new-card"),f=document.querySelector(".popup_type_image"),y=document.querySelectorAll(".popup__close");_.classList.add("popup_is-animated"),f.classList.add("popup_is-animated"),v.classList.add("popup_is-animated"),s.addEventListener("click",(function(){L.value=q.textContent,g.value=S.textContent,a(_)})),m.addEventListener("click",(function(){a(v)})),y.forEach((function(e){var t=e.closest(".popup");t&&e.addEventListener("click",(function(){p(t)}))}));var k=document.querySelector('.popup__form[name="edit-profile"]'),q=document.querySelector(".profile__title"),S=document.querySelector(".profile__description"),L=document.querySelector(".popup__input_type_name"),g=document.querySelector(".popup__input_type_description");k.addEventListener("submit",(function(e){e.preventDefault(),q.textContent=L.value,S.textContent=g.value,p(_)}));var E=document.querySelector('.popup__form[name="new-place"]'),C=document.querySelector(".popup__input_type_card-name"),h=document.querySelector(".popup__input_type_url");E.addEventListener("submit",(function(n){n.preventDefault();var o=e(l,{name:C.value,link:h.value},{onLikeClick:r,onRemoveClick:t,onImageClick:A});d.prepend(o),E.reset(),p(v)}));var b=document.querySelector(".popup__image"),x=document.querySelector(".popup__caption");function A(e){b.src=e.target.src,b.alt=e.target.alt,x.textContent=e.target.alt,a(f)}})();